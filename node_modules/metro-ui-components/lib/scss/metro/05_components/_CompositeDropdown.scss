@mixin CompositeDropdown {
  $composite-z-indexes: (
    profilePicture,
    badge
  );

  .m-compositeDropdown {
    position: relative;
    display: inline-block;

    // TODO Move positioning out of component scope
    float: right;

    & &-trigger {
      position: relative;
      display: flex;
      flex-direction: row;
      align-items: center;
      -webkit-user-drag: none;
      user-select: none;
      cursor: pointer;
      z-index: 1;

      &Icon {
        margin-right: 0;
      }

      @media (min-width: map-get($breakpoints, "medium")) {
        &Icon {
          margin-right: px2rem(16);
        }
      }

      .m-badge {
        z-index: zIndex(badge, $composite-z-indexes);
      }

      .m-profilePicture-button {
        z-index: zIndex(profilePicture, $composite-z-indexes);
      }
    }

    &-label {
      display: none;

      @media (min-width: map-get($breakpoints, "medium")) {
        position: relative;

        display: flex;
        flex-direction: column;
        padding-right: px2rem(8);

        text-align: right;
        /* Randomly picked max-width */
        max-width: px2rem(215);
      }

      .m-microAnimation {
        position: absolute;
        top: px2rem(16);
        left: auto;
        right: px2rem(-16);
      }
    }

    &-userName,
    &-companyName {
      font-size: px2rem(13);
      line-height: 1.1;
      color: color(white);

      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    &-hasNoCompany,
    &-companyName {
      font-size: px2rem(16);
    }

    &-companyName {
      font-weight: bold;
    }

    &-header {
      padding: 0 px2rem(10);

      @include color-gradient-directional(
        color-tint(metro-blue, 20),
        color(metro-blue),
        135deg
      );
    }

    &-headerTitle {
      font-size: px2rem(20);
    }

    &-headerClose {
      position: absolute;
      top: px2rem(24);
      right: px2rem(24);
    }

    &-headerAction {
      position: absolute;
      top: px2rem(24);
      left: px2rem(24);

      font-size: px2rem(16);
      line-height: px2rem(22);
      color: color(white);
    }

    &-footer {
      padding: px2rem(12) px2rem(24) px2rem(12);
      background-color: transparent;

      @media (min-width: map-get($breakpoints, "medium")) {
        padding-top: 1px; // To prevent margin-collapsing
      }
    }

    &-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;

      background-color: color(white);

      z-index: 2;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;

      @media (min-width: map-get($breakpoints, "medium")) {
        overflow-y: visible;
      }

      &-enter {
        transition: 300ms transform;
        transform: translateY(100%);

        &-active {
          transition: 300ms transform;
          transform: translateY(0);
        }
      }

      &-exit {
        transform-origin: 100% 0;
        transform: translateY(0%);

        &-active {
          transition: 300ms transform;
          transform: translateY(100%);
        }
      }

      &Content {
        overflow: hidden;
        min-height: 100%;

        background-color: rgba(color-tint(grey, 95), 0.5);
      }

      @media (min-width: map-get($breakpoints, "medium")) {
        position: absolute;
        right: px2rem(10);
        top: px2rem(48);
        left: auto;
        bottom: auto;

        max-width: px2rem(384);
        width: 100vw;

        border-radius: 3px;
        box-shadow: 0 8px 32px 0 transparentize(color(metro-blue), 0.85);

        &:after {
          position: absolute;
          right: px2rem(19);
          bottom: 100%;

          height: 0;
          width: 0;
          border: px2rem(8) solid transparent;
          border-bottom-color: white;

          content: " ";
          pointer-events: none;
        }

        &-enter {
          opacity: 0;
          transform: translateY(-10px);

          &-active {
            opacity: 1;
            transition: 300ms opacity, 300ms transform;
            transform: translateY(0);
          }
        }

        &-exit {
          opacity: 1;
          transform: translateY(0);

          &-active {
            opacity: 0;
            transition: 300ms opacity, 300ms transform;
            transform: translateY(-10px);
          }
        }
      }
    }
  }
}
