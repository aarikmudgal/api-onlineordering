@mixin Button {
  .m-button {
    position: relative;
    height: px2rem(40);
    padding: 0 px2rem(16);

    vertical-align: middle;

    border: 0;
    border-radius: px2rem(2);

    color: color(white);

    font-family: inherit;
    font-size: px2rem(16);
    font-weight: bold;
    text-align: center;
    line-height: 1.5;

    outline: none;
    cursor: pointer;
    user-select: none;

    transition: background-color 125ms ease, box-shadow 125ms ease;

    .m-icon {
      margin: 0 px2rem(8);
      vertical-align: bottom;
      font-size: px2rem(20);
      width: 1em;
      height: 1em;
      transform: translateY(px2rem(-2));
    }

    &-small .m-icon {
      font-size: px2rem(16);
    }

    &-large .m-icon {
      font-size: px2rem(24);
    }

    &.m-button-isDisabled,
    &:disabled {
      box-shadow: none;
      cursor: not-allowed;
    }

    &-disabledShaker {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      opacity: 0;
    }

    &-isShaking {
      animation: btn-shake 0.5s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;

      @at-root {
        @keyframes btn-shake {
          0% {
            transform: translateX(3px);
          }
          20% {
            transform: translateX(-2.5px);
          }
          40% {
            transform: translateX(1.5px);
          }
          60% {
            transform: translateX(-1px);
          }
          80% {
            transform: translateX(0.5px);
          }
          100% {
            transform: translateX(0);
          }
        }
      }
    }

    &-primary,
    &-primaryRaised {
      color: color(white);
      background-color: color(blue);

      @include hover() {
        background-color: color-shade(blue, 20);
      }

      @include focus() {
        background-color: color-shade(blue, 20);
      }

      &:active {
        background-color: color-shade(blue, 20);
      }
    }

    &-primaryRaised {
      @include has-box-shadow-2;

      @include hover() {
        @include has-box-shadow-2-hover;
      }
    }

    &-secondary {
      color: color(metro-blue);
      background-color: color-tint(blue, 90);

      @include hover() {
        background-color: color-tint(blue, 80);
      }

      @include focus() {
        background-color: color-tint(blue, 80);
      }

      &:active {
        background-color: color-tint(blue, 80);
      }
    }

    &-primary,
    &-primaryRaised,
    &-primaryWarning,
    &-secondary {

      &.m-button-isDisabled,
      &:disabled {
        color: color-tint(grey, 40);

        @include has-no-interaction(color-tint(grey, 90));

        @include hover() {
          background-color: color-tint(grey, 90);
          text-decoration: none;
          box-shadow: none;
        }
      }
    }


    &-primaryWarning {
      color: color(white);
      background-color: color(red);

      @include hover() {
        background-color: color-shade(red, 20);
      }

      @include focus() {
        background-color: color-shade(red, 20);
      }

      &:active {
        background-color: color-shade(red, 20);
      }
    }

    &-primaryRaised {
      @include has-box-shadow-2;

      @include hover() {
        @include has-box-shadow-2-hover;
      }
    }

    &-ghost,
    &-ghostWarning,
    &-ghostMuted {
      color: color(blue);
      background: transparent;

      font-weight: normal;

      @include hover() {
        background-color: transparentize(color(blue), 0.95);
        text-decoration: underline;
      }

      @include focus() {
        background-color: transparentize(color(blue), 0.95);
        text-decoration: underline;
      }

      &:active {
        background-color: transparentize(color(blue), 0.95);
        text-decoration: underline;
      }

      &.m-button-isDisabled,
      &:disabled {
        color: color-tint(grey, 60);

        @include hover() {
          background-color: transparent;
          color: color-tint(grey, 60);
          text-decoration: none;
        }
      }
    }

    &-ghostMuted {
      color: color(grey);
    }

    &-ghostWarning {
      color: color(red);

      @include hover() {
        background-color: transparentize(color(red), 0.95);
      }

      @include focus() {
        background-color: transparentize(color(red), 0.95);
      }

      &:active {
        background-color: transparentize(color(red), 0.95);
      }
    }

    &.m-button-waiting {
      position: relative;
      text-decoration: none;

      > span {
        color: transparent;
      }

      .m-spinner {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);

        font-size: px2rem(11);
      }

      @include hover() {
        text-decoration: none;
      }
    }

    &-large {
      height: px2rem(48);
      padding: 0 px2rem(32);
      font-size: px2rem(18);
    }

    &-small {
      height: px2rem(32);
      padding: 0 px2rem(12);
      font-size: px2rem(14);
    }

    &-block {
      display: block;
      width: 100%;
      margin: px2rem(16) 0;
      padding: 0;
    }

    &-isWide {
      padding: 0 2.25em;
    }

    /* Color override. Breaks consistency and should be used as less as possible. */
    &-isDarkBlue {
      background-color: color-shade(blue, 60);
      color: color(white);
    }
  }

  input.m-button {
    -webkit-appearance: none;
    -moz-appearance: none;

    border: none !important;
    color: color(white);
  }

  .m-labelIcon {
    display: flex;
    align-items: center;
    align-content: center;
    justify-content: center;

    > .m-label {
      padding-right: get-ui(grid-padding);
    }

    > .m-Icon {
      max-height: 1.2rem;
    }
  }

  @media (max-width: map-get($breakpoints, "small")) {
    .m-labelIcon .m-Icon {
      transform: scale(0.7);
    }
  }

  // TODO move a.button styles from elements/_a.scss here
  a.m-button-block {
    justify-content: center;
  }

  // TODO Check if still valid/necessary.
  a.m-button {
    display: inline-flex;
    align-items: center;

    &:hover {
      text-decoration: none !important;
    }

    &:focus {
      text-decoration: none;
    }
  }
}
